<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDV0BajS19_2QlTP7V7NlMdSYUeYBVsXNQ",
    authDomain: "jetty373auth.firebaseapp.com",
    projectId: "jetty373auth",
    storageBucket: "jetty373auth.appspot.com",
    messagingSenderId: "328185729230",
    appId: "1:328185729230:web:ddf10eb9fe7bf20a83c09f",
    measurementId: "G-G6MTXSB8J0"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  function isValidEmail(email) {
    return /\S+@\S+\.\S+/.test(email);
  }

  function login() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    if (!isValidEmail(email)) {
      document.getElementById("message").textContent = "Please enter a valid email.";
      document.getElementById("message").classList.add("error");
      return;
    }

    auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        // 🔁 REDIRECT based on user email
        if (user.email === "admin@jeety3737@gmail.com") {
          window.location.href = "admin.html";
        } else if (user.email === "jett@supply.net.nz") {
          window.location.href = "jett_dashboard.html";
        } else {
          window.location.href = "user.html";
        }
      })
      .catch(err => {
        document.getElementById("message").textContent = err.message;
        document.getElementById("message").classList.add("error");
      });
  }

  function goToSignup() {
    window.location.href = "signup.html";
  }
</script>
